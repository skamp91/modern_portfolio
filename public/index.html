<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio TDD App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 24px;
            background: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tab-button.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .tab-content.active {
            display: block;
        }

        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .form-section h3 {
            margin-bottom: 15px;
            color: #667eea;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .item-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .item-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .item-card p {
            color: #666;
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 4px 4px 4px 0;
        }

        .badge-secondary {
            background: #764ba2;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state::before {
            content: "üì≠";
            font-size: 3em;
            display: block;
            margin-bottom: 10px;
        }

        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Portfolio TDD App</h1>
            <p>Verwalten Sie Ihre Projekte, Skills und Kontakte</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('projects')">Projekte</button>
            <button class="tab-button" onclick="showTab('skills')">Skills</button>
            <button class="tab-button" onclick="showTab('contacts')">Kontakte</button>
        </div>

        <!-- Projekte Tab -->
        <div id="projects" class="tab-content active">
            <div class="alert" id="projects-alert"></div>
            <div class="form-section">
                <h3>Neues Projekt hinzuf√ºgen</h3>
                <form id="project-form" onsubmit="addProject(event)">
                    <div class="form-group">
                        <label>ID:</label>
                        <input type="text" id="project-id" required>
                    </div>
                    <div class="form-group">
                        <label>Titel:</label>
                        <input type="text" id="project-title" required>
                    </div>
                    <div class="form-group">
                        <label>Beschreibung:</label>
                        <textarea id="project-description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Technologien (kommagetrennt):</label>
                        <input type="text" id="project-technologies" placeholder="z.B. JavaScript, React, Node.js">
                    </div>
                    <div class="form-group">
                        <label>URL (optional):</label>
                        <input type="url" id="project-url">
                    </div>
                    <button type="submit" class="btn">Projekt hinzuf√ºgen</button>
                </form>
            </div>
            <div id="projects-list" class="items-grid"></div>
        </div>

        <!-- Skills Tab -->
        <div id="skills" class="tab-content">
            <div class="alert" id="skills-alert"></div>
            <div class="form-section">
                <h3>Neuen Skill hinzuf√ºgen</h3>
                <form id="skill-form" onsubmit="addSkill(event)">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" id="skill-name" required>
                    </div>
                    <div class="form-group">
                        <label>Level:</label>
                        <select id="skill-level" required>
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Advanced">Advanced</option>
                            <option value="Expert">Expert</option>
                            <option value="Master">Master</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Kategorie:</label>
                        <input type="text" id="skill-category" required>
                    </div>
                    <button type="submit" class="btn">Skill hinzuf√ºgen</button>
                </form>
            </div>
            <div id="skills-list" class="items-grid"></div>
        </div>

        <!-- Kontakte Tab -->
        <div id="contacts" class="tab-content">
            <div class="alert" id="contacts-alert"></div>
            <div class="form-section">
                <h3>Neue Kontaktanfrage</h3>
                <form id="contact-form" onsubmit="addContact(event)">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" id="contact-name" required>
                    </div>
                    <div class="form-group">
                        <label>E-Mail:</label>
                        <input type="email" id="contact-email" required>
                    </div>
                    <div class="form-group">
                        <label>Nachricht:</label>
                        <textarea id="contact-message" required></textarea>
                    </div>
                    <button type="submit" class="btn">Kontakt senden</button>
                </form>
            </div>
            <div id="contacts-list" class="items-grid"></div>
        </div>
    </div>

    <script>
        // Tab Navigation
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            loadData(tabName);
        }

        // Alert Helper
        function showAlert(type, message, tab) {
            const alert = document.getElementById(`${tab}-alert`);
            alert.className = `alert alert-${type} show`;
            alert.textContent = message;
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        // API Calls
        async function apiCall(url, method = 'GET', data = null) {
            const options = {
                method,
                headers: { 'Content-Type': 'application/json' }
            };
            if (data) options.body = JSON.stringify(data);
            const response = await fetch(url, options);
            return await response.json();
        }

        // Load Data
        async function loadData(type) {
            try {
                let response;
                if (type === 'projects') {
                    response = await apiCall('/api/projects');
                    displayProjects(response.data || []);
                } else if (type === 'skills') {
                    response = await apiCall('/api/skills');
                    displaySkills(response.data || []);
                } else if (type === 'contacts') {
                    response = await apiCall('/api/contacts');
                    displayContacts(response.data || []);
                }
            } catch (error) {
                console.error('Fehler beim Laden:', error);
            }
        }

        // Add Project
        async function addProject(event) {
            event.preventDefault();
            const project = {
                id: document.getElementById('project-id').value,
                title: document.getElementById('project-title').value,
                description: document.getElementById('project-description').value,
                technologies: document.getElementById('project-technologies').value
                    .split(',').map(t => t.trim()).filter(t => t),
                url: document.getElementById('project-url').value
            };

            try {
                const response = await apiCall('/api/projects', 'POST', project);
                if (response.success) {
                    showAlert('success', 'Projekt erfolgreich hinzugef√ºgt!', 'projects');
                    document.getElementById('project-form').reset();
                    loadData('projects');
                } else {
                    showAlert('error', response.error, 'projects');
                }
            } catch (error) {
                showAlert('error', 'Fehler beim Hinzuf√ºgen des Projekts', 'projects');
            }
        }

        // Display Projects
        function displayProjects(projects) {
            const container = document.getElementById('projects-list');
            if (projects.length === 0) {
                container.innerHTML = '<div class="empty-state">Noch keine Projekte vorhanden</div>';
                return;
            }
            container.innerHTML = projects.map(project => `
                <div class="item-card">
                    <h4>${project.title}</h4>
                    <p>${project.description}</p>
                    ${project.technologies ? project.technologies.map(tech => 
                        `<span class="badge">${tech}</span>`
                    ).join('') : ''}
                    ${project.url ? `<p><a href="${project.url}" target="_blank">üîó ${project.url}</a></p>` : ''}
                    <button class="btn btn-danger" onclick="deleteProject('${project.id}')" style="margin-top: 10px;">L√∂schen</button>
                </div>
            `).join('');
        }

        // Delete Project
        async function deleteProject(id) {
            if (!confirm('M√∂chten Sie dieses Projekt wirklich l√∂schen?')) return;
            try {
                const response = await apiCall(`/api/projects/${id}`, 'DELETE');
                if (response.success) {
                    showAlert('success', 'Projekt gel√∂scht!', 'projects');
                    loadData('projects');
                }
            } catch (error) {
                showAlert('error', 'Fehler beim L√∂schen', 'projects');
            }
        }

        // Add Skill
        async function addSkill(event) {
            event.preventDefault();
            const skill = {
                name: document.getElementById('skill-name').value,
                level: document.getElementById('skill-level').value,
                category: document.getElementById('skill-category').value
            };

            try {
                const response = await apiCall('/api/skills', 'POST', skill);
                if (response.success) {
                    showAlert('success', 'Skill erfolgreich hinzugef√ºgt!', 'skills');
                    document.getElementById('skill-form').reset();
                    loadData('skills');
                } else {
                    showAlert('error', response.error, 'skills');
                }
            } catch (error) {
                showAlert('error', 'Fehler beim Hinzuf√ºgen des Skills', 'skills');
            }
        }

        // Display Skills
        function displaySkills(skills) {
            const container = document.getElementById('skills-list');
            if (skills.length === 0) {
                container.innerHTML = '<div class="empty-state">Noch keine Skills vorhanden</div>';
                return;
            }
            container.innerHTML = skills.map(skill => `
                <div class="item-card">
                    <h4>${skill.name}</h4>
                    <p><strong>Level:</strong> <span class="badge badge-secondary">${skill.level}</span></p>
                    <p><strong>Kategorie:</strong> ${skill.category}</p>
                </div>
            `).join('');
        }

        // Add Contact
        async function addContact(event) {
            event.preventDefault();
            const contact = {
                name: document.getElementById('contact-name').value,
                email: document.getElementById('contact-email').value,
                message: document.getElementById('contact-message').value
            };

            try {
                const response = await apiCall('/api/contacts', 'POST', contact);
                if (response.success) {
                    showAlert('success', 'Kontakt erfolgreich gesendet!', 'contacts');
                    document.getElementById('contact-form').reset();
                    loadData('contacts');
                } else {
                    showAlert('error', response.error, 'contacts');
                }
            } catch (error) {
                showAlert('error', 'Fehler beim Senden der Nachricht', 'contacts');
            }
        }

        // Display Contacts
        function displayContacts(contacts) {
            const container = document.getElementById('contacts-list');
            if (contacts.length === 0) {
                container.innerHTML = '<div class="empty-state">Noch keine Kontakte vorhanden</div>';
                return;
            }
            container.innerHTML = contacts.map(contact => `
                <div class="item-card">
                    <h4>${contact.name}</h4>
                    <p><strong>E-Mail:</strong> ${contact.email}</p>
                    <p>${contact.message}</p>
                    <p><small>${new Date(contact.date).toLocaleString('de-DE')}</small></p>
                    ${!contact.read ? '<span class="badge">Neu</span>' : ''}
                </div>
            `).join('');
        }

        // Load initial data
        loadData('projects');
    </script>
</body>
</html>

